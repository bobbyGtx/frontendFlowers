<div class="info">
  <div class="container">
    <div class="personal-title">Личный кабинет</div>
    <div class="personal-pages-selector">
      <div class="personal-page active">Личные данные</div>
      <div class="personal-page" routerLink="/orders">Ваши заказы</div>
    </div>

    <div class="data-form" [formGroup]="infoForm">
      <div class="data-form-block">
        <div class="data-form-label">Личные данные</div>
        <div class="data-form-label-additional">Введённые данные автоматически подставятся при оформлении заказа.</div>
        <div class="data-form-inputs personal-data-inputs">
          <input type="text" class="input" placeholder="Имя" formControlName="firstName"
                 (blur)="changeFirstLetter(firstName)"
                 matTooltip="Введите имя получателя" matTooltipClass="mat-tooltip-compact" matTooltipPosition="before"
                 matTooltipShowDelay="200" matTooltipHideDelay="200">
          <input type="text" class="input" placeholder="Фамилия" formControlName="lastName"
                 (blur)="changeFirstLetter(lastName)"
                 matTooltip="Введите фамилию получателя" matTooltipClass="mat-tooltip-compact"
                 matTooltipPosition="after" matTooltipShowDelay="200" matTooltipHideDelay="200">
          <input type="text" class="input" placeholder="Телефон" formControlName="phone"
                 matTooltip="Введите телефон получателя. +4912345678901" matTooltipClass="mat-tooltip-compact"
                 matTooltipPosition="before" matTooltipShowDelay="200" matTooltipHideDelay="200">
          <input type="text" class="input" placeholder="E-Mail" formControlName="email"
                 matTooltip="Ваш E-Mail. Для изменения необходимо ввести пароль." matTooltipClass="mat-tooltip-compact"
                 matTooltipPosition="after" matTooltipShowDelay="200" matTooltipHideDelay="200">
        </div>
      </div><!--Личные данные-->

      <div class="data-form-block">
        <div class="data-form-label">Пароль</div>
        <div class="data-form-inputs password-data-inputs">
          <div class="password-input old-pass">
          <input type="password" #oldPwd class="input" [class.inValid]="oldPassFalse && oldPassword?.value"
                 placeholder="Действующий пароль" formControlName="oldPassword"
                 (keydown)="oldPassKeyDwnFunc($event,oldPwd)"
                 matTooltip="Введите действующий пароль" matTooltipClass="mat-tooltip-compact"
                 matTooltipPosition="before" matTooltipShowDelay="200" matTooltipHideDelay="200">
            <svg class="password-eye" (click)="showHidePassword($event)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M73 39.1C63.6 29.7 48.4 29.7 39.1 39.1C29.8 48.5 29.7 63.7 39 73.1L567 601.1C576.4 610.5 591.6 610.5 600.9 601.1C610.2 591.7 610.3 576.5 600.9 567.2L504.5 470.8C507.2 468.4 509.9 466 512.5 463.6C559.3 420.1 590.6 368.2 605.5 332.5C608.8 324.6 608.8 315.8 605.5 307.9C590.6 272.2 559.3 220.2 512.5 176.8C465.4 133.1 400.7 96.2 319.9 96.2C263.1 96.2 214.3 114.4 173.9 140.4L73 39.1zM208.9 175.1C241 156.2 278.1 144 320 144C385.2 144 438.8 173.6 479.9 211.7C518.4 247.4 545 290 558.5 320C544.9 350 518.3 392.5 479.9 428.3C476.8 431.1 473.7 433.9 470.5 436.7L425.8 392C439.8 371.5 448 346.7 448 320C448 249.3 390.7 192 320 192C293.3 192 268.5 200.2 248 214.2L208.9 175.1zM390.9 357.1L282.9 249.1C294 243.3 306.6 240 320 240C364.2 240 400 275.8 400 320C400 333.4 396.7 346 390.9 357.1zM135.4 237.2L101.4 203.2C68.8 240 46.4 279 34.5 307.7C31.2 315.6 31.2 324.4 34.5 332.3C49.4 368 80.7 420 127.5 463.4C174.6 507.1 239.3 544 320.1 544C357.4 544 391.3 536.1 421.6 523.4L384.2 486C364.2 492.4 342.8 496 320 496C254.8 496 201.2 466.4 160.1 428.3C121.6 392.6 95 350 81.5 320C91.9 296.9 110.1 266.4 135.5 237.2z"/></svg>
            <svg class="password-eye-hide" (click)="showHidePassword($event)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M320 144C254.8 144 201.2 173.6 160.1 211.7C121.6 247.5 95 290 81.4 320C95 350 121.6 392.5 160.1 428.3C201.2 466.4 254.8 496 320 496C385.2 496 438.8 466.4 479.9 428.3C518.4 392.5 545 350 558.6 320C545 290 518.4 247.5 479.9 211.7C438.8 173.6 385.2 144 320 144zM127.4 176.6C174.5 132.8 239.2 96 320 96C400.8 96 465.5 132.8 512.6 176.6C559.4 220.1 590.7 272 605.6 307.7C608.9 315.6 608.9 324.4 605.6 332.3C590.7 368 559.4 420 512.6 463.4C465.5 507.1 400.8 544 320 544C239.2 544 174.5 507.2 127.4 463.4C80.6 419.9 49.3 368 34.4 332.3C31.1 324.4 31.1 315.6 34.4 307.7C49.3 272 80.6 220 127.4 176.6zM320 400C364.2 400 400 364.2 400 320C400 290.4 383.9 264.5 360 250.7C358.6 310.4 310.4 358.6 250.7 360C264.5 383.9 290.4 400 320 400zM240.4 311.6C242.9 311.9 245.4 312 248 312C283.3 312 312 283.3 312 248C312 245.4 311.8 242.9 311.6 240.4C274.2 244.3 244.4 274.1 240.5 311.5zM286 196.6C296.8 193.6 308.2 192.1 319.9 192.1C328.7 192.1 337.4 193 345.7 194.7C346 194.8 346.2 194.8 346.5 194.9C404.4 207.1 447.9 258.6 447.9 320.1C447.9 390.8 390.6 448.1 319.9 448.1C258.3 448.1 206.9 404.6 194.7 346.7C192.9 338.1 191.9 329.2 191.9 320.1C191.9 309.1 193.3 298.3 195.9 288.1C196.1 287.4 196.2 286.8 196.4 286.2C208.3 242.8 242.5 208.6 285.9 196.7z"/></svg>
          </div>
          <button type="button" class="button small-btn old-pass-check"
                  [disabled]="oldPassword?.invalid || !oldPassword?.value" [class.checked]="oldPassChecked"
                  (click)="checkOldPassword(oldPwd)"
                  [matTooltip]="oldPassChecked?'Пароль подтвержден. Доступно изменение E-Mail и пароля':'Проверить пароль'"
                  matTooltipClass="mat-tooltip-compact" matTooltipPosition="after" matTooltipShowDelay="200"
                  matTooltipHideDelay="200">
            <svg *ngIf="oldPassChecked" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
              <path
                d="M530.8 134.1C545.1 144.5 548.3 164.5 537.9 178.8L281.9 530.8C276.4 538.4 267.9 543.1 258.5 543.9C249.1 544.7 240 541.2 233.4 534.6L105.4 406.6C92.9 394.1 92.9 373.8 105.4 361.3C117.9 348.8 138.2 348.8 150.7 361.3L252.2 462.8L486.2 141.1C496.6 126.8 516.6 123.6 530.9 134z"/>
            </svg>
            <span *ngIf="!oldPassChecked">Проверить</span>
          </button>
          <div class="password-input new-pass">
            <input type="password" class="input" placeholder="Новый пароль" formControlName="newPassword"
                   [matTooltip]="oldPassChecked?'Введите новый пароль. (Минимум 6 символов)':'Для изменения пароля, необходимо ввести текущий пароль. (Минимум 6 символов)'"
                   matTooltipClass="mat-tooltip-compact" matTooltipPosition="after" matTooltipShowDelay="200"
                   matTooltipHideDelay="200">
            <svg class="password-eye" (click)="showHidePassword($event)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M73 39.1C63.6 29.7 48.4 29.7 39.1 39.1C29.8 48.5 29.7 63.7 39 73.1L567 601.1C576.4 610.5 591.6 610.5 600.9 601.1C610.2 591.7 610.3 576.5 600.9 567.2L504.5 470.8C507.2 468.4 509.9 466 512.5 463.6C559.3 420.1 590.6 368.2 605.5 332.5C608.8 324.6 608.8 315.8 605.5 307.9C590.6 272.2 559.3 220.2 512.5 176.8C465.4 133.1 400.7 96.2 319.9 96.2C263.1 96.2 214.3 114.4 173.9 140.4L73 39.1zM208.9 175.1C241 156.2 278.1 144 320 144C385.2 144 438.8 173.6 479.9 211.7C518.4 247.4 545 290 558.5 320C544.9 350 518.3 392.5 479.9 428.3C476.8 431.1 473.7 433.9 470.5 436.7L425.8 392C439.8 371.5 448 346.7 448 320C448 249.3 390.7 192 320 192C293.3 192 268.5 200.2 248 214.2L208.9 175.1zM390.9 357.1L282.9 249.1C294 243.3 306.6 240 320 240C364.2 240 400 275.8 400 320C400 333.4 396.7 346 390.9 357.1zM135.4 237.2L101.4 203.2C68.8 240 46.4 279 34.5 307.7C31.2 315.6 31.2 324.4 34.5 332.3C49.4 368 80.7 420 127.5 463.4C174.6 507.1 239.3 544 320.1 544C357.4 544 391.3 536.1 421.6 523.4L384.2 486C364.2 492.4 342.8 496 320 496C254.8 496 201.2 466.4 160.1 428.3C121.6 392.6 95 350 81.5 320C91.9 296.9 110.1 266.4 135.5 237.2z"/></svg>
            <svg class="password-eye-hide" (click)="showHidePassword($event)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M320 144C254.8 144 201.2 173.6 160.1 211.7C121.6 247.5 95 290 81.4 320C95 350 121.6 392.5 160.1 428.3C201.2 466.4 254.8 496 320 496C385.2 496 438.8 466.4 479.9 428.3C518.4 392.5 545 350 558.6 320C545 290 518.4 247.5 479.9 211.7C438.8 173.6 385.2 144 320 144zM127.4 176.6C174.5 132.8 239.2 96 320 96C400.8 96 465.5 132.8 512.6 176.6C559.4 220.1 590.7 272 605.6 307.7C608.9 315.6 608.9 324.4 605.6 332.3C590.7 368 559.4 420 512.6 463.4C465.5 507.1 400.8 544 320 544C239.2 544 174.5 507.2 127.4 463.4C80.6 419.9 49.3 368 34.4 332.3C31.1 324.4 31.1 315.6 34.4 307.7C49.3 272 80.6 220 127.4 176.6zM320 400C364.2 400 400 364.2 400 320C400 290.4 383.9 264.5 360 250.7C358.6 310.4 310.4 358.6 250.7 360C264.5 383.9 290.4 400 320 400zM240.4 311.6C242.9 311.9 245.4 312 248 312C283.3 312 312 283.3 312 248C312 245.4 311.8 242.9 311.6 240.4C274.2 244.3 244.4 274.1 240.5 311.5zM286 196.6C296.8 193.6 308.2 192.1 319.9 192.1C328.7 192.1 337.4 193 345.7 194.7C346 194.8 346.2 194.8 346.5 194.9C404.4 207.1 447.9 258.6 447.9 320.1C447.9 390.8 390.6 448.1 319.9 448.1C258.3 448.1 206.9 404.6 194.7 346.7C192.9 338.1 191.9 329.2 191.9 320.1C191.9 309.1 193.3 298.3 195.9 288.1C196.1 287.4 196.2 286.8 196.4 286.2C208.3 242.8 242.5 208.6 285.9 196.7z"/></svg>
          </div>
          <div class="password-input new-pass-repeat">
          <input type="password" class="input" placeholder="Повтор пароля"
                 formControlName="newPasswordRepeat"
                 [class.inValid]="infoForm.hasError('passwordMismatch')"
                 [matTooltip]="infoForm.hasError('passwordMismatch')?'Пароли не совпадают':'Повторите новый пароль'"
                 matTooltipClass="mat-tooltip-compact" matTooltipPosition="before" matTooltipShowDelay="200"
                 matTooltipHideDelay="200">
            <svg class="password-eye" (click)="showHidePassword($event)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M73 39.1C63.6 29.7 48.4 29.7 39.1 39.1C29.8 48.5 29.7 63.7 39 73.1L567 601.1C576.4 610.5 591.6 610.5 600.9 601.1C610.2 591.7 610.3 576.5 600.9 567.2L504.5 470.8C507.2 468.4 509.9 466 512.5 463.6C559.3 420.1 590.6 368.2 605.5 332.5C608.8 324.6 608.8 315.8 605.5 307.9C590.6 272.2 559.3 220.2 512.5 176.8C465.4 133.1 400.7 96.2 319.9 96.2C263.1 96.2 214.3 114.4 173.9 140.4L73 39.1zM208.9 175.1C241 156.2 278.1 144 320 144C385.2 144 438.8 173.6 479.9 211.7C518.4 247.4 545 290 558.5 320C544.9 350 518.3 392.5 479.9 428.3C476.8 431.1 473.7 433.9 470.5 436.7L425.8 392C439.8 371.5 448 346.7 448 320C448 249.3 390.7 192 320 192C293.3 192 268.5 200.2 248 214.2L208.9 175.1zM390.9 357.1L282.9 249.1C294 243.3 306.6 240 320 240C364.2 240 400 275.8 400 320C400 333.4 396.7 346 390.9 357.1zM135.4 237.2L101.4 203.2C68.8 240 46.4 279 34.5 307.7C31.2 315.6 31.2 324.4 34.5 332.3C49.4 368 80.7 420 127.5 463.4C174.6 507.1 239.3 544 320.1 544C357.4 544 391.3 536.1 421.6 523.4L384.2 486C364.2 492.4 342.8 496 320 496C254.8 496 201.2 466.4 160.1 428.3C121.6 392.6 95 350 81.5 320C91.9 296.9 110.1 266.4 135.5 237.2z"/></svg>
            <svg class="password-eye-hide" (click)="showHidePassword($event)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M320 144C254.8 144 201.2 173.6 160.1 211.7C121.6 247.5 95 290 81.4 320C95 350 121.6 392.5 160.1 428.3C201.2 466.4 254.8 496 320 496C385.2 496 438.8 466.4 479.9 428.3C518.4 392.5 545 350 558.6 320C545 290 518.4 247.5 479.9 211.7C438.8 173.6 385.2 144 320 144zM127.4 176.6C174.5 132.8 239.2 96 320 96C400.8 96 465.5 132.8 512.6 176.6C559.4 220.1 590.7 272 605.6 307.7C608.9 315.6 608.9 324.4 605.6 332.3C590.7 368 559.4 420 512.6 463.4C465.5 507.1 400.8 544 320 544C239.2 544 174.5 507.2 127.4 463.4C80.6 419.9 49.3 368 34.4 332.3C31.1 324.4 31.1 315.6 34.4 307.7C49.3 272 80.6 220 127.4 176.6zM320 400C364.2 400 400 364.2 400 320C400 290.4 383.9 264.5 360 250.7C358.6 310.4 310.4 358.6 250.7 360C264.5 383.9 290.4 400 320 400zM240.4 311.6C242.9 311.9 245.4 312 248 312C283.3 312 312 283.3 312 248C312 245.4 311.8 242.9 311.6 240.4C274.2 244.3 244.4 274.1 240.5 311.5zM286 196.6C296.8 193.6 308.2 192.1 319.9 192.1C328.7 192.1 337.4 193 345.7 194.7C346 194.8 346.2 194.8 346.5 194.9C404.4 207.1 447.9 258.6 447.9 320.1C447.9 390.8 390.6 448.1 319.9 448.1C258.3 448.1 206.9 404.6 194.7 346.7C192.9 338.1 191.9 329.2 191.9 320.1C191.9 309.1 193.3 298.3 195.9 288.1C196.1 287.4 196.2 286.8 196.4 286.2C208.3 242.8 242.5 208.6 285.9 196.7z"/></svg>
          </div>
        </div>
      </div><!--Пароль-->

      <div class="data-form-block">
        <div class="data-form-label">Адрес доставки</div>
        <div class="data-form-inputs address-data-inputs">
          <mat-form-field class="select-input region"
                          matTooltip="Выберите регион доставки" matTooltipClass="mat-tooltip-compact"
                          matTooltipPosition="after" matTooltipShowDelay="200" matTooltipHideDelay="200">
            <mat-label class="select-label">Выберите регион</mat-label>
            <mat-select formControlName="region">
              <mat-option [value]="region" *ngFor="let region of regionList">{{ region }}</mat-option>
            </mat-select>
          </mat-form-field>
          <input type="text" class="input town" placeholder="Город" formControlName="city"
                 matTooltip="Укажите город доставки" matTooltipClass="mat-tooltip-compact" matTooltipPosition="before"
                 matTooltipShowDelay="200" matTooltipHideDelay="200">
          <input type="text" class="input zip" placeholder="Индекс" formControlName="zip"
                 matTooltip="Введите почтовый индекс" matTooltipClass="mat-tooltip-compact" matTooltipPosition="after"
                 matTooltipShowDelay="200" matTooltipHideDelay="200">
          <input type="text" class="input street" placeholder="Улица" formControlName="street"
                 matTooltip="Введите улицу" matTooltipClass="mat-tooltip-compact" matTooltipPosition="before"
                 matTooltipShowDelay="200" matTooltipHideDelay="200">
          <input type="text" class="input house" placeholder="№ дома" formControlName="house"
                 matTooltip="Введите номер дома (10a)" matTooltipClass="mat-tooltip-compact" matTooltipPosition="after"
                 matTooltipShowDelay="200" matTooltipHideDelay="200">
        </div>
      </div>

      <div class="data-form-block" *ngIf="deliveryTypes.length">
        <div class="data-form-label">Предпочитаемый способ доставки</div>
        <div class="data-form-types">
          <div class="data-form-type-item" *ngFor="let deliveryType of deliveryTypes"
               [class.active]="deliveryTypeField?.value == deliveryType.id"
               [class.disabled]="deliveryType.disabled"
               [matTooltip]="deliveryType.disabled?'Метод доставки не доступен':''"
               matTooltipClass="mat-tooltip-compact"
               matTooltipPosition="below"
               matTooltipHideDelay="200"
               (click)="changeDeliveryType(deliveryType)">{{ deliveryType.deliveryType }}
          </div>
        </div>
      </div> <!--Способ доставки-->

      <div class="data-form-block" *ngIf="paymentTypes.length">
        <div class="data-form-label">Предпочитаемый способ оплаты</div>
        <div class="data-form-radio">
          <div class="data-form-radio-block" *ngFor="let paymentType of paymentTypes">
            <input type="radio"
                   [id]="'radio_'+paymentType.id"
                   [value]="paymentType.id"
                   formControlName="paymentType">
            <label [for]="'radio_'+paymentType.id">{{ paymentType.paymentType }}</label>
          </div>
        </div>
      </div> <!--Способ оплаты-->

      <button class="button" [disabled]="!(infoForm.dirty && infoForm.valid)" (click)="updateUserInfo()">Сохранить
      </button>
    </div>

    <div class="page-image">
      <img ngSrc="/images/page/main.png" width="1025" height="587" alt="flower">
    </div>

  </div>
</div>
